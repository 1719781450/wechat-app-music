"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var exports=module.exports={};try{Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=require("../../npm/babel-runtime/regenerator/index.js"),_regenerator2=_interopRequireDefault(_regenerator),_extends2=require("../../npm/babel-runtime/helpers/extends.js"),_extends3=_interopRequireDefault(_extends2),_asyncToGenerator2=require("../../npm/babel-runtime/helpers/asyncToGenerator.js"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_getPrototypeOf=require("../../npm/babel-runtime/core-js/object/get-prototype-of.js"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("../../npm/babel-runtime/helpers/classCallCheck.js"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("../../npm/babel-runtime/helpers/createClass.js"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("../../npm/babel-runtime/helpers/possibleConstructorReturn.js"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("../../npm/babel-runtime/helpers/inherits.js"),_inherits3=_interopRequireDefault(_inherits2),_labrador=require("../../npm/labrador/index.js"),_labrador2=_interopRequireDefault(_labrador),_api=require("../../utils/api.js"),_api2=_interopRequireDefault(_api),_util=require("../../utils/util.js"),_util2=_interopRequireDefault(_util),Play=function(e){function t(){var e,r,a,n;(0,_classCallCheck3["default"])(this,t);for(var s=arguments.length,u=Array(s),i=0;s>i;i++)u[i]=arguments[i];return r=a=(0,_possibleConstructorReturn3["default"])(this,(e=t.__proto__||(0,_getPrototypeOf2["default"])(t)).call.apply(e,[this].concat(u))),a.data={file:{},item:{},isPlaying:!1},n=r,(0,_possibleConstructorReturn3["default"])(a,n)}return(0,_inherits3["default"])(t,e),(0,_createClass3["default"])(t,[{key:"updateSong",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function r(e){var t,a,n;return _regenerator2["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=9;break}return r.next=3,_util2["default"].playSong(e);case 3:return t=r.sent,this.setData((0,_extends3["default"])({isPlaying:!0},t)),r.next=7,_labrador2["default"].setStorage({key:"playing",data:t});case 7:r.next=13;break;case 9:return r.next=11,_labrador2["default"].getStorage({key:"playing"});case 11:a=r.sent,this.setData(a.data);case 13:return r.next=15,_labrador2["default"].getStorage({key:"isPlaying"});case 15:n=r.sent,this.setData({isPlaying:n.data});case 17:case"end":return r.stop()}},r,this)}));return e}()},{key:"onLoad",value:function(e){this.updateSong(e.songid)}},{key:"onShow",value:function(){this.updateSong()}},{key:"playToggle",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function r(e){return _regenerator2["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.data.isPlaying){e.next=5;break}_labrador2["default"].stopBackgroundAudio(),this.setData({isPlaying:!1}),e.next=8;break;case 5:return e.next=7,_util2["default"].playSong(this.data.item.song_id);case 7:this.setData({isPlaying:!0});case 8:case"end":return e.stop()}},r,this)}));return e}()}]),t}(_labrador2["default"].Component);exports["default"]=Play;var __page=new exports["default"];__page.init(),Page(__page)}catch(error){throw console.error(error.stack),error}